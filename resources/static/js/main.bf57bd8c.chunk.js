(this["webpackJsonpentando-mf-template"]=this["webpackJsonpentando-mf-template"]||[]).push([[0],{76:function(e,t){},77:function(e,t){},78:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var a=n(26),r=n(27),c=n(28),o=n(30),i=n(31),u=n(29),s=n.n(u),l=n(4),d=n(0),p=n.n(d),m=n(3),f=n(13),b=n(14),h=n(5),j=n.n(h),v="".concat("http://172.40.0.142:1337"),y=("".concat("/entando-template-api/api","/template/searchby/"),"EntKcToken"),I={Authorization:"Bearer ".concat("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiaWF0IjoxNjUzNTczMDY3LCJleHAiOjE2NTYxNjUwNjd9.FiN2x2wdAnnukijuQmoP3xzLxPyjy3FFMSGpwi-iJKE")},g=function(){var e=Object(m.a)(p.a.mark((function e(t){var n,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("".concat("/entando-template-api/api","/template/"),w({}));case 2:return n=e.sent,a=n.data,r=a.filter((function(e){return t.indexOf(e.id+"")>-1})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(m.a)(p.a.mark((function e(t,n){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t||n.length||console.error(t),a=n.map((function(e){return"".concat(v,"/content-manager/collection-types/api::").concat(t,".").concat(t,"/").concat(e)})),e.next=4,j.a.all(a.map((function(e){return j.a.get(e,w({},y))})));case 4:return r=e.sent,e.abrupt("return",r.map((function(e){return e.data})));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(e){var t=window&&window.entando&&window.entando.keycloak&&window.entando.keycloak.authenticated?window.entando.keycloak.token:localStorage.getItem("token");return console.log("ET-Widget",t),t?{headers:{Authorization:"".concat(e," ").concat(t)}}:e===y?{headers:I}:{}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Bearer",n=k(t);return Object(b.a)(Object(b.a)({},e),n)},N=(n(78),n(2)),x=n(55),A="http://172.40.0.142:1337";var D=function(e){var t=e.contentName,n=e.contentIdsAndTemplateIds,a=e.saveQueryDetails,r=e.colLabelName;console.log("APP.JS saveQueryDetails",a,"fieldSearchBy()()()()",r),t=t||"banner",n=n||"%5B%7B%22templateId%22:%2250%22,%22contentId%22:5%7D,%7B%22templateId%22:%2248%22,%22contentId%22:3%7D,%7B%22templateId%22:%2248%22,%22contentId%22:2%7D%5D";var c=Object(l.useState)(null),o=Object(f.a)(c,2),i=o[0],u=o[1],s=Object(l.useState)(decodeURI(n)),d=Object(f.a)(s,2),b=d[0];function h(e,t,n){if(e&&t&&Object.keys(n).length){var a=n.map((function(n){var a=t.filter((function(e){return e.id===n.contentId})),r=e.filter((function(e){return+e.id===+n.templateId}));return r.length&&a[0]&&Object.keys(a[0]).length?(Object.keys(a[0]).map((function(e,t){a[0][e]&&Array.isArray(a[0][e])?a[0][e]&&a[0][e][0]&&a[0][e][0].ext&&a[0][e].map((function(e){return e.url=A+e.url})):a[0][e]&&"object"===typeof a[0][e]&&(a[0][e]&&a[0][e].ext&&"object"===typeof a[0][e]&&(a[0][e].url=A+a[0][e].url),console.log("filterContent[0][key]",a[0][e]))})),x.render(r[0].contentShape,{content:a[0]})):""}));u(a)}}return d[1],Object(l.useEffect)(Object(m.a)(p.a.mark((function e(){var n,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b.length&&JSON.parse(b),e.next=3,g(n.map((function(e){return e.templateId})));case 3:return a=e.sent,e.next=6,O(t,n.map((function(e){return e.contentId})));case 6:r=e.sent,h(a,r,n);case 8:case"end":return e.stop()}}),e)}))),[]),Object(N.jsx)(N.Fragment,{children:i?Object(N.jsx)("div",{dangerouslySetInnerHTML:{__html:i}}):Object(N.jsx)("h1",{children:"Loading..."})})},T={contentName:"contentName",contentIdsAndTemplateIds:"contentIdsAndTemplateIds",saveQueryDetails:"saveQueryDetails",colLabelName:"colLabelName"},L=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"attributeChangedCallback",value:function(e,t,n){if(!Object.values(T).includes(e))throw new Error("Untracked changed attribute: ".concat(e));this.mountPoint&&n!==t&&this.render()}},{key:"connectedCallback",value:function(){this.mountPoint=document.createElement("div"),this.appendChild(this.mountPoint),this.render()}},{key:"render",value:function(){var e=this.getAttribute(T.contentName),t=this.getAttribute(T.contentIdsAndTemplateIds),n=this.getAttribute(T.saveQueryDetails),a=this.getAttribute(T.colLabelName);console.log("contentName ==>",e,"contentIdsAndTemplateIds ==>",t,"saveQueryDetails ==>",n,"colLabelName<<<<<>>>>>",a),s.a.render(Object(N.jsx)(D,{contentName:e,contentIdsAndTemplateIds:t,saveQueryDetails:n,colLabelName:a}),this.mountPoint)}}],[{key:"observedAttributes",get:function(){return Object.values(T)}}]),n}(Object(i.a)(HTMLElement));customElements.get("my-list-widget")||customElements.define("my-list-widget",L)}},[[80,1,2]]]);
//# sourceMappingURL=main.bf57bd8c.chunk.js.map