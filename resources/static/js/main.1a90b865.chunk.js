(this["webpackJsonpentando-mf-template"]=this["webpackJsonpentando-mf-template"]||[]).push([[0],{76:function(e,t){},77:function(e,t){},78:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var a=n(26),c=n(27),r=n(28),o=n(30),i=n(31),s=n(29),u=n.n(s),l=n(5),d=n(0),p=n.n(d),m=n(2),f=n(13),h=n(14),b=n(4),v=n.n(b),j="".concat("http://172.40.0.142:1337"),y=("".concat("/entando-template-api/api","/template/searchby/"),"EntKcToken"),g={Authorization:"Bearer ".concat("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiaWF0IjoxNjUzNTczMDY3LCJleHAiOjE2NTYxNjUwNjd9.FiN2x2wdAnnukijuQmoP3xzLxPyjy3FFMSGpwi-iJKE")},I=function(){var e=Object(m.a)(p.a.mark((function e(t){var n,a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat("/entando-template-api/api","/template/"),x({}));case 2:return n=e.sent,a=n.data,c=a.filter((function(e){return t.indexOf(e.id+"")>-1})),e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(m.a)(p.a.mark((function e(t,n){var a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t||n.length||console.error(t),a=n.map((function(e){return"".concat(j,"/content-manager/collection-types/api::").concat(t,".").concat(t,"/").concat(e)})),e.next=4,v.a.all(a.map((function(e){return v.a.get(e,x({},y))})));case 4:return c=e.sent,e.abrupt("return",c.map((function(e){return e.data})));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(m.a)(p.a.mark((function e(t,n,a){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat(j,"/content-manager/collection-types/api::").concat(t,".").concat(t,"?page=1&pageSize=100&sort=createdAt:DESC&filters[").concat(n,"][$containsi]=").concat(a));case 2:c=e.sent,console.log("fullListData >===>",c);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),w=function(e){var t=window&&window.entando&&window.entando.keycloak&&window.entando.keycloak.authenticated?window.entando.keycloak.token:localStorage.getItem("token");return console.log("ET-Widget",t),t?{headers:{Authorization:"".concat(e," ").concat(t)}}:e===y?{headers:g}:{}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Bearer",n=w(t);return Object(h.a)(Object(h.a)({},e),n)},N=(n(78),n(3)),A=n(55),T="http://172.40.0.142:1337";var D=function(e){var t=e.contentName,n=e.contentIdsAndTemplateIds,a=e.saveQueryDetails,c=e.colLabelName;console.log("APP.JS saveQueryDetails",a,"fieldSearchBy()()()()",c),t=t||"banner",n=n||"%5B%7B%22templateId%22:%2250%22,%22contentId%22:5%7D,%7B%22templateId%22:%2248%22,%22contentId%22:3%7D,%7B%22templateId%22:%2248%22,%22contentId%22:2%7D%5D";var r=Object(l.useState)(null),o=Object(f.a)(r,2),i=o[0],s=o[1],u=Object(l.useState)(decodeURI(n)),d=Object(f.a)(u,2),h=d[0];function b(e,t,n){if(e&&t&&Object.keys(n).length){var a=n.map((function(n){var a=t.filter((function(e){return e.id===n.contentId})),c=e.filter((function(e){return+e.id===+n.templateId}));return c.length&&a[0]&&Object.keys(a[0]).length?(Object.keys(a[0]).map((function(e,t){a[0][e]&&Array.isArray(a[0][e])?a[0][e]&&a[0][e][0]&&a[0][e][0].ext&&a[0][e].map((function(e){return e.url=T+e.url})):a[0][e]&&"object"===typeof a[0][e]&&(a[0][e]&&a[0][e].ext&&"object"===typeof a[0][e]&&(a[0][e].url=T+a[0][e].url),console.log("filterContent[0][key]",a[0][e]))})),A.render(c[0].contentShape,{content:a[0]})):""}));s(a)}}return d[1],Object(l.useEffect)(Object(m.a)(p.a.mark((function e(){var n,r,o,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.length&&JSON.parse(h),!(t&&a&&c)){e.next=7;break}return console.log("This is Save As Method",t,a,c),r=JSON.parse(decodeURI("%7B%22templateId%22:%2249%22,%22searchTerm%22:%22Title%22%7D")),e.next=6,k(t,c,r.searchTerm);case 6:e.sent;case 7:return e.next=9,I(n.map((function(e){return e.templateId})));case 9:return o=e.sent,e.next=12,O(t,n.map((function(e){return e.contentId})));case 12:i=e.sent,b(o,i,n);case 14:case"end":return e.stop()}}),e)}))),[]),Object(N.jsx)(N.Fragment,{children:i?Object(N.jsx)("div",{dangerouslySetInnerHTML:{__html:i}}):Object(N.jsx)("h1",{children:"Loading..."})})},S={contentName:"contentName",contentIdsAndTemplateIds:"contentIdsAndTemplateIds",saveQueryDetails:"saveQueryDetails",colLabelName:"colLabelName"},L=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"attributeChangedCallback",value:function(e,t,n){if(!Object.values(S).includes(e))throw new Error("Untracked changed attribute: ".concat(e));this.mountPoint&&n!==t&&this.render()}},{key:"connectedCallback",value:function(){this.mountPoint=document.createElement("div"),this.appendChild(this.mountPoint),this.render()}},{key:"render",value:function(){var e=this.getAttribute(S.contentName),t=this.getAttribute(S.contentIdsAndTemplateIds),n=this.getAttribute(S.saveQueryDetails),a=this.getAttribute(S.colLabelName);console.log("contentName ==>",e,"contentIdsAndTemplateIds ==>",t,"saveQueryDetails ==>",n,"colLabelName<<<<<>>>>>",a),u.a.render(Object(N.jsx)(D,{contentName:e,contentIdsAndTemplateIds:t,saveQueryDetails:n,colLabelName:a}),this.mountPoint)}}],[{key:"observedAttributes",get:function(){return Object.values(S)}}]),n}(Object(i.a)(HTMLElement));customElements.get("my-list-widget")||customElements.define("my-list-widget",L)}},[[80,1,2]]]);
//# sourceMappingURL=main.1a90b865.chunk.js.map